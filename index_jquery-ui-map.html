<!DOCTYPE html>
<html>
    <head>
        <meta content="yes" name="apple-mobile-web-app-capable" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
        <meta content="minimum-scale=1.0, width=device-width, maximum-scale=0.6667, user-scalable=no" name="viewport" />
        <link href="css/style.css" rel="stylesheet" media="screen" type="text/css" />
        <link href="css/jquery.mobile-1.3.1.min.css" rel="stylesheet" media="screen" type="text/css" />
        
        <!--<script type="text/javascript" charset="utf-8" src="cordova.js"></script>-->
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
        <script type="text/javascript" charset="utf-8" src="js/jquery-1.10.1.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.3.1.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/jquery.ui.map.full.min.js"></script>
        <!--<script type="text/javascript" charset="utf-8" src="js/jquery.ui.map.extensions.js"></script>-->
        
        <script type="text/javascript">
		
            $(document).on('pageinit', '#booking',  function(){
				var marker;
				
                $(document).on('pageshow', '#booking', function() {
					$('#map_canvas').gmap({
						'center': '-34.633314,-58.399846',
						'zoom': 17,
						'disableDefaultUI':true,
						'callback': function() {
							var self = this;
							marker = self.addMarker({ 'position': self.get('map').getCenter() }).click(function() {
								self.openInfoWindow({ 'content': 'Prueba' }, this);
							});
					 	}
					}).bind('init', function(evt, map) {
						
						$(map).dragend(function() { 
							var latLng = marker.gmap('get', 'position');
							alert(latLng);
						});
					});
					
					//$('#map_canvas').gmap('option', 'center', new google.maps.LatLng(59.3426606750, 18.0736160278));
					
					/*
					$('#map_canvas').gmap().bind('init', function(ev, map) {
						$('#map_canvas').gmap('addMarker', {'position': self.get('map').getCenter()}, 'bounds': true}).click(function() {
							$('#map_canvas').gmap('openInfoWindow', {'content': 'Hello World!'}, this);
						});
					})
					*/
					
					
					/*.dragend(function() {
						alert('dragend');
						var lat = marker.getPosition().lat();
						var lng = marker.getPosition().lng();
						latLng = new google.maps.LatLng(lat, lng);
						geocodePosition(latLng);
					});*/
				  
			  
					//var marker = $('#map_canvas').gmap('get', 'markers > 0');
					
			
				  	/*var marker = new google.maps.Marker({
						map: map
					});
				
					marker.bindTo('position', map, 'center');*/
				
				
					
						
								
                });
            });
            
            /*
            document.addEventListener("deviceReady", deviceReady, false);
            
            function deviceReady() {
                alert('deviceReady');
                $(document).on('pageinit', '#mainpage',  function() {
                    $('#map_canvas').gmap({'center': '-34.633314,-58.399846'});
                });
            }
            */
            
        </script>
        
    </head>
    <body>
    	
        <div data-role="page" id="booking">
            <div data-role="header">
                <h1>Pedí tu taxi</h1>
            </div>
            <div data-role="content">	
                <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
					<div id="map_canvas" style="height:350px;"></div>
				</div>

            </div>
            <div data-role="footer">
                <h4>eTaxi</h4>
            </div>
        </div>
        
        <div data-role="page" id="mainpage">
            <div data-role="header">
                <h1>Página Principal</h1>
                <a href="#booking" data-role="button" data-theme="b" data-rel="back">Volver</a>
            </div>
            <div data-role="content">
                <ul data-role="listview" data-theme="b">
                    <li><a href="#login" data-transition="slide">Login</a></li>
                    <li><a href="#config" data-transition="flip">Configuración</a></li>
                </ul>
            </div>
            <div data-role="footer">
                <h4>eTaxi</h4>
            </div>
        </div>
        
        <div data-role="page" id="login">
            <div data-role="header">
                <a href="#mainpage" data-role="button" data-theme="b" data-rel="back">Volver</a>
                <h1>Login</h1>
            </div>
            <div data-role="content">
               
            </div>
            <div data-role="footer">
                <h4>eTaxi</h4>
            </div>
        </div>

        <div data-role="page" id="config">
            <div data-role="header">
                <a href="#mainpage" data-role="button" data-theme="b" data-rel="back">Volver</a>
                <h1>Configuración</h1>
            </div>
            <div data-role="content">	
                <a href="#" data-role="button" data-theme="d">Boton1</a>
                <a href="#" data-role="button" data-theme="e">Boton2</a>
                <a href="http://www.google.com.ar" data-role="button" data-theme="a" rel="external">External</a>
            </div>
            <div data-role="footer">
                <h4>eTaxi</h4>
            </div>
        </div>
    </body>
</html>